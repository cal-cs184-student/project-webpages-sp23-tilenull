<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<style>
  body {
    background-color: white;
    padding: 100px;
    width: 1000px;
    margin: auto;
    text-align: left;
    font-weight: 300;
    font-family: 'Open Sans', sans-serif;
    color: #121212;
  }
  h1, h2, h3, h4 {
    font-family: 'Source Sans Pro', sans-serif;
  }
  kbd {
    color: #121212;
  }
</style>
<title>CS 184 Path Tracer</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link href="https://fonts.googleapis.com/css?family=Open+Sans|Source+Sans+Pro" rel="stylesheet">

<script>
  MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']]
    }
  };
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
</script>

</head>


<body>

<h1 align="middle">CS 184: Computer Graphics and Imaging, Spring 2023</h1>
<h1 align="middle">Project 3-2: Additional Features to PathTracer</h1>
<h2 align="middle">Shawn Zhao, Jason Gong</h2>

<!-- Add Website URL -->
<h2 align="middle">Website URL: <a href="https://cal-cs184-student.github.io/project-webpages-sp23-tilenull/proj3-2/index.html">https://cal-cs184-student.github.io/project-webpages-sp23-tilenull/proj3-2/index.html</a></h2>

<br><br>

<h2 align="middle">Overview</h2>
<p>
</p>
<br>

<h2 align="middle">Part 2: Microfacet Material</h2>

<p>
  In this part, we implemented 
  <br><br>
  Shown below are images of  CBdragon_microfacet_au.dae rendered at alphas of 0.005, 0.05, 0.25 and 0.5.
</p>
<!-- Example of including multiple figures -->
<div align="middle">
  <table style="width:100%">
    <tr align="center">
      <td>
        <img src="images/dragon0005.png" align="middle" width="480px"/>
        <figcaption>0.005</figcaption>
      </td>
      <td>
        <img src="images/dragon005.png" align="middle" width="480px"/>
        <figcaption>0.05</figcaption>
      </td>
    </tr>
    <tr align="center">
      <td>
        <img src="images/dragon025.png" align="middle" width="480px"/>
        <figcaption>0.25</figcaption>
      </td>
      <td>
        <img src="images/dragon05.png" align="middle" width="480px"/>
        <figcaption>0.5</figcaption>
      </td>
    </tr>
  </table>
</div>
<br>

<p>
	As the roughness increases, the dragon becomes less specular and reflective. The texture and color also appears less smooth and more matte. We also see more artifacting/noise with the lower alphas. This is because as the roughness is increased, the distribution of the microfacet normals becomes more spread out and diffuse. The increased diffusion likely also disperses the extra artifacting at lower alphas; we can see it become finer grained and blended in.
</p>

<p>
	Shown below are images of CBbunny_microfacet_cu.dae rendered with cosine hemisphere sampling vs. our implementation of importance sampling.
  </p>
  <!-- Example of including multiple figures -->
  <div align="middle">
	<table style="width:100%">
	  <tr align="center">
		<td>
		  <img src="images/bunnyhem.png" align="middle" width="480px"/>
		  <figcaption>Cosine hemisphere sampling</figcaption>
		</td>
		<td>
		  <img src="images/bunnyimp.png" align="middle" width="480px"/>
		  <figcaption>Importance sampling</figcaption>
		</td>
	  </tr>
	</table>
  </div>
  <br>

  <p>
	Cosine hemisphere sampling is considerably more noisy and artifacted than importance sampling. The reflective parts of the bunny are noisy and the black parts and the edges of the object are especially defined with cosine hemisphere sampling. Our importance sampling reduces noise by sampling according to the shape of the Beckmann NDF.
  </p>
  <p>
	To implement importance sampling we calculate the pdfs p&theta and p&phi and sample them using the inverted and integrated equations given in the spec, where we use <code>sampler.get_sample()</code> to determine r1 and r2.
	<div align="middle">
		<table style="width:100%">
		  <tr align="center">
			<td>
			  <img src="images/2.4.png" align="middle" width="480px"/>
			</td>
			<td>
			  <img src="images/2.4-1.png" align="middle" width="480px"/>
			</td>
		  </tr>
		</table>
	  </div>
	  <br>
	  We determine the sampled microfacet normal h by converting from spherical coordinates using the formula, where r=1:
	  <img src="images/2.4-2.png" align="middle" width="480px"/>
	  <figcaption>https://en.wikipedia.org/wiki/Vector_fields_in_cylindrical_and_spherical_coordinates</figcaption>
	  <b></b>
	  We reflect wo about h and assign it to the pointer to wi using the formula:
	  <img src="images/2.4-3.png" align="middle" width="480px"/>
	  <figcaption>https://en.wikipedia.org/wiki/Reflection_(mathematics)</figcaption>
	  <b></b>
	  Finally, we calculate the pdf of sampling wi with respect to the solid angle using the formula:
	  <img src="images/2.4-4.png" align="middle" width="480px"/>
  </p>

</body>
</html>